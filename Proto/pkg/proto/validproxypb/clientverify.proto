// cs protocol
syntax = "proto3";
package validproxypb;

option go_package = "git.woa.com/red/validproxy/pkg/proto/validproxypb";

import "clientpb/record.proto";

service ClientVerifyService {
  // verify
  rpc ClientVerify(ClientVerifyRequest) returns (ClientVerifyReply);
  // 获取战斗数据文件url
  rpc GetDungeonRecordUrl(GetDungeonRecordUrlRequest) returns (GetDungeonRecordUrlReply);
  // 获取战斗数据
  rpc GetDungeonRecord(GetDungeonRecordRequest) returns (GetDungeonRecordReply);
}

message GetDungeonRecordRequest {
  uint64 GameTraceId = 1;
}

message GetDungeonRecordReply {
  clientpb.DungeonRecord dungeon_record = 1;
}

message GetDungeonRecordUrlRequest {
  uint64 GameTraceId = 1;
}

message GetDungeonRecordUrlReply {
  string DungeonRecordUrl = 1;
}

message ClientVerifyRequest {
  clientpb.DungeonRecord dungeon_record = 1;
  bytes dungeon_record_bytes            = 2;
  string record_file_name               = 3;
}

message ClientVerifyReply {
  bool is_need_punish = 1;  // 是否需要惩罚
}

message DungeonRecords {
  repeated bytes dungeon_record_bytes = 1;
}