// cs protocol
syntax = "proto3";

package zonepb;
option go_package = "git.code.oa.com/red/zonesvr/pkg/proto/zonepb";

service SystemOpenService {
  // 父系统下的子系统
  rpc QuerySubSystems(QuerySubSystemsRequest) returns (QuerySubSystemsReply);

  // 检查系统开放
  rpc IsSystemOpen(IsSystemOpenRequest) returns (IsSystemOpenReply);

  // 进入某一个系统
  rpc EnterSystem(EnterSystemRequest) returns (EnterSystemReply);
}

// buf:lint:ignore ENUM_VALUE_UPPER_SNAKE_CASE
enum SystemID {
  SYSTEM_ID_UNKNOWN                             = 0;
  Fight                                         = 1;       // 通用 PVE 战斗(非正式系统 ID，仅用于打印道具流水)
  Beginnner                                     = 2;       // 新手引导(非正式系统 ID，仅用于打印道具流水)
  IDIP                                          = 3;       // IDIP(非正式系统 ID，仅用于打印道具流水)
  GM                                            = 4;       // GM 工具(非正式系统 ID，仅用于打印道具流水)
  RoleBasic                                     = 5;       // 玩家基础(非正式系统 ID，仅用于打印道具流水)
  Belly                                         = 6;       // 贝里系统.
  RenameCard                                    = 8;       // 改名卡系统
  FixMe                                         = 99;      // 单测中临时使用，请及时替换为正式系统 ID
  Buddy                                         = 101;     // 伙伴
  BuddyPokedex                                  = 102;     // 伙伴图鉴
  IntelArchive                                  = 103;     // 情报档案
  BestLineup                                    = 104;     // 最强伙伴阵容
  SupportSkill                                  = 105;     // 援护技能
  Factory                                       = 201;     // 工厂
  FactoryNewFacility                            = 201001;  // 工厂- 有可解锁的新设施
  FactoryFacilityCanUpgradeStar                 = 201002;  // 工厂- 有可升星的设施
  FactoryFactoryCanUnlock                       = 201003;  // 工厂- 有可解锁的工厂
  FactoryEnoughFatigueAndHaveImprovableFacility = 201004;  // 工场- 体力足够且有可以升级/升星的设施
  FactoryCanFacilityUpgradeOrUpgradeStar        = 201005;  // 工场- 是否存在设施能升级或升星，原来的201红点逻辑搬到这里
  Fatigue                                       = 202;     // 体力系统
  Stylish                                       = 205;     // 时髦系统
  Shipyard                                      = 301;     // 船坞
  ShipyardWarship                               = 303;     // 船坞-战船
  ShipyardPart                                  = 304;     // 船坞-改造
  ShipyardSoul                                  = 306;     // 船坞-船灵
  Treasure                                      = 302;     // 藏品室 秘宝
  Library                                       = 401;     // 图书馆
  Equipment                                     = 501;     // 装备（名刀）
  // Guild = 601;        // 同盟 替换为2401
  MainScene                        = 701;        // 主城
  LobbyLoadout                     = 702;        // 主界面阵容
  LobbyLoadoutBuddyToken           = 7020001;    // 伙伴信物
  Task                             = 801;        // 任务
  Fame                             = 802;        // 名望
  CaptainManual                    = 803;        // 船长手册
  DailyTask                        = 804;        // 日常任务
  DailyTaskLevelAdjust             = 80400101;   // DailyTask的DailyAwardConfig页签(按等级调整收益)
  WeeklyTaskLevelAdjust            = 80400102;   // DailyTask的WeeklyAwardConfig页签(按等级调整收益)
  Achieve                          = 805;        // 成就
  AchieveTaskFatigue               = 805001;     // 成就任务 - 免费体力
  FameTitle                        = 806;        // 称号系统
  AvatarBox                        = 807;        // 头像框
  Dress                            = 808;        // 装扮
  Avatar                           = 809;        // 头像
  Fashion                          = 810;        // 时装
  BusinessCard                     = 811;        // 名片
  ArenaScene                       = 812;        // 竞技场场景
  UltimateKillPic                     = 850;        // 奥义击杀图
  Recruit                          = 901;        // 招募
  RecruitDetail                    = 9010001;    // 招募详情
  RecruitHistory                   = 903;        // 招募历史
  Shop                             = 1001;       // 商城
  Diamond                          = 1002;       // 钻石系统
  Chat                             = 1101;       // 聊天
  ChatVoice                        = 110101;     // 实时语音聊天
  ChatBulletCurtain                = 110102;     // 聊天弹幕系统
  Sticker                          = 1102;       // 表情包
  ItemKeeper                       = 1103;       // 临时道具管理系统(装扮系统)
  Friend                           = 1201;       // 好友
  AdventureEntry                   = 1301;       // 冒险(主界面玩法入口)
  JointBattle                      = 1302;       // 同盟协战
  JointBattleLevelAdjust           = 130200101;  // 同盟协战ChestReward页签(按等级调整收益)
  Mirror                           = 1303;       // 爬塔
  MirrorNewChapterUnlock           = 1303001;    // 镜中世界新章节解锁
  SecretField                      = 1304;       // 秘境探险
  SecretFieldBox                   = 1304001;    // 秘境宝箱
  SecretFieldBoxMailCompensate     = 130400101;  // 秘境宝箱邮件补偿
  SecretFieldNewLevel              = 1304002;    // 秘境新解锁层级
  IntelFarm                        = 1305009;    // 情报收集(废弃)
  IntelSociety                     = 1305;       // 情报会社
  IntelSocietyIntelWall            = 1305001;    // 情报会社情报墙
  IntelSocietyManage               = 1305002;    // 情报会社报社管理按钮
  IntelSocietyFacility             = 1305003;    // 情报会社设施解锁和报社升级界面
  IntelSocietyFacilityUpgrade      = 1305004;    // 情报会社设施升级界面
  BountyGame                       = 1306;       // 赏金大赛
  BountyGameReward                 = 1306001;    // 赏金大赛-奖励
  BountyGameRewardLevelAdjust      = 130600101;  // 赏金大赛-FightReward页签(按等级调整收益)
  Arena                            = 1401;       // 竞技
  ArenaLoadout                     = 1402;       // 竞技-阵容
  ArenaLadderAward                 = 1403;       // 竞技-段位赛奖励
  ArenaPractice                    = 1404;       // 竞技-练习场
  ArenaCasual                      = 1406;       // 竞技-娱乐赛
  ArenaFriendDuel                  = 1407;       // 竞技-好友切磋
  ArenaCasualAward                 = 1408;       // deprecated 竞技-娱乐赛奖励
  ArenaLadder                      = 1409;       // 竞技-段位赛
  PvpTask                          = 1410;       // 竞技-任务
  PvpTaskWinBox                    = 1410001;    // 竞技-任务-每日胜场宝箱红点ID
  PvpTaskRewards                   = 1410002;    // 竞技-任务-奖励可用红点ID
  PvpTaskEasyTime                  = 1410003;    // 竞技-任务-轻松竞技场红点ID
  PvpLadderYear                    = 1411;       // 竞技场赛年
  PvpLadderYearTaskReward          = 1411001;    // 竞技场赛年任务奖励
  PvpFastDuel                      = 1414;       // 极速单挑
  Voyage                           = 1501;       // 航海
  Logbook                          = 1502;       // 航海日志
  Bounty                           = 1503;       // 赏金任务
  Safari                           = 1504;       // 岛屿探险
  SafariCultivation                = 1505;       // 岛屿探险养成
  CultivationAbility               = 1505001;    // 岛屿探险养成(能力按钮)
  CultivationPet                   = 1505002;    // 岛屿探险养成(宠物按钮)
  CultivationDelicacy              = 1505003;    // 岛屿探险养成(美食按钮)
  CultivationTalent                = 1505004;    // 岛屿探险养成(天赋按钮)
  Delegate                         = 1506;       // 派遣
  Fishing                          = 1507;       // 钓鱼
  Mail                             = 1701;       // 邮件
  Adventure                        = 1901;       // 主线
  AdventureLevelAdjust             = 190100101;  // 主线的LevelConfig页签(按等级调整收益)
  AdventurePlotCard                = 1902;       // 剧情卡
  AdventureIdle                    = 1903;       // 巡航奖励（旧）
  EliteDungeon                     = 1906;       // 精英副本（强者挑战）
  Pet                              = 2001;       // 宠物
  Dial                             = 2101;       // 空岛贝
  Will                             = 2201;       // 意志
  WillItemBag                      = 2202;       // 意志系统背包
  Act                              = 2301;       // 活动系统
  Cdkey                            = 2302;       // 兑换
  CdkeyPassword                    = 230201;     // 口令码
  CdkeyRedeemCode                  = 230202;     // 兑换码
  Guild                            = 2401;       // 同盟
  GuildBlessing                    = 2402;       // 同盟祝福
  GuildBlessingLevelAdjust         = 240200101;  // 同盟祝福BlessConfig页签(按等级调整收益)
  GuildBlessingBoxAwardLevelAdjust = 240200102;  // 同盟祝福BlessBoxAwardConfig页签(按等级调整收益)
  GuildAdmin                       = 2403;       // 同盟管理
  GuildScene                       = 2404;       // 同盟场景
  GuildPrayHouse                   = 2405;       // 同盟情报屋
  GuildPrayHouseLevelAdjust        = 240500101;  // 同盟情报屋ChipQualityInfo页签(按等级调整收益)
  GuildImpeldown                   = 2408;       // 同盟勇闯推进城(旧)
  GuildActs                        = 2411;       // 同盟活动
  GuildIslandSiege                 = 2415;       // 同盟海岛争夺战
  GuildInperudaun                  = 2417;       // 同盟勇闯推进城
  GuildSeaKing                     = 2418;       // 同盟狩猎海王

  GuildIslandSiegeSignUp     = 241501;     // 海岛争夺战报名
  GuildIslandSiegeTask       = 241502;     // 海岛争夺战任务
  GuildBanquet               = 2416;       // 同盟宴会
  AutoFight                  = 2701;       // 自动战斗
  LimitBoxSecretField        = 2801;       // 秘境限制宝箱
  FamousKnife                = 2901;       // 名刀
  PseudoPvpBattle            = 3101;       // 伪pvp战斗
  LimitCard                  = 3201;       // 限时道具卡
  HuntingSea                 = 3301;       // 狩猎海王类(废弃)
  QuickBuy                   = 3302;       // 快捷购买
  FruitPower                 = 3401;       // 果实能力
  BadgeDecompose             = 3402;       // 果实徽章分解
  Cruise                     = 3501;       // 巡航奖励
  Equip                      = 3601;       // 装备
  EquipMailCompensate        = 3601001;    // 装备邮件补偿
  EquipMailReward            = 3601002;    // 装备邮件奖励
  EquipAward                 = 3601003;    // 装备穿戴红点
  EquipAdvance               = 3601004;    // 装备进阶红点
  EquipEnhance               = 3601005;    // 装备强化红点
  EquipInlay                 = 3601006;    // 装备镶嵌红点
  EquipLevelUP               = 3601007;    // 装备等级升级红点
  Alloy                      = 3602;       // 合金
  Ranklist                   = 3701;       // 排行榜
  PopularitySettleReward     = 3701001;    // 人气榜结算奖励
  FcWeeklySettleReward       = 3701002;    // 个人实力榜周结算奖励
  IntelOffer                 = 3801;       // 情报订阅
  IntelOfferBuddyPool        = 3801001;    // 情报订阅 - 情报卡池
  IntelOfferRecuitButton     = 3801002;    // 情报订阅 - 招募按钮
  Pay                        = 4001;       // 支付系统
  Kitchen                    = 4101;       // 厨房系统
  KitchenCookbook            = 4101001;    // 厨房食谱
  KitchenCuisineMenu         = 4101003;    // 厨房料理菜单
  KitchenCookingCondition    = 4101004;    // 厨房料理烹饪条件
  IslandExplore              = 4201;       // 岛屿探索
  IslandExploreLevelAdjust   = 420100101;  // 岛屿探索Area页签(按等级调整收益)
  WillCrystal                = 4301;       // 意志水晶
  WillCrystalDecompose       = 4302;       // 意志水晶分解
  WillCrystalBall            = 4303;       // 意志水晶获取
  FishGround                 = 4401;       // 钓鱼系统
  FishBook                   = 4402;       // 钓鱼系统图鉴
  FishingReward              = 4403;       // 钓鱼任务奖励
  FishingAbility             = 4404;       // 钓鱼能力入口
  SeaWar                     = 4601;       // 海战
  BattlePass                 = 4701;       // 宝典系统
  BattlePassRewards          = 4701001;    // 宝典奖励红点
  BattlePassTasks            = 4701002;    // 宝典任务红点
  BattlePassExchange         = 4701003;    // 宝典兑换红点
  BattlePassRank             = 4701004;    // 宝典排行榜红点
  BattlePassSpecialPack      = 4701005;    // 宝典特惠礼包红点
  BattlePassSeasonOneSpecial       = 4701006;    // 宝典第一赛季特殊奖励红点
  BattlePassCompensate       = 470100001;  // 宝典补发
  LoadoutMin                 = 900001;     // 阵容系统ID段开始 !!! 请勿分配中间的ID
  LoadoutMax                 = 999999;     // 阵容系统ID段结束 !!! 请勿分配中间的ID
  ActIDMin                   = 230100000;  // 活动ID起始
  ActIDMax                   = 230199999;  // 活动ID结束
  VoyageExplore              = 4501;       // 海域探险
  VoyageExploreAdventureEntry      = 4501000;    // 海域探险 - 冒险场景
  VoyageExploreLogBook             = 4501001;    // 海域探险 - 航海日志
  VoyageExploreEncyclopedia        = 4501002;    // 海域探险 - 海域百科
  VoyageExploreDelegate            = 4501003;    // 海域探险 - 派遣系统
  VoyageExploreStrangeAnimal       = 4501004;    // 海域探险 - 珍兽图鉴
  VoyageExploreHachiTakoyaki       = 4501005;    // 海域探险 - 小八章鱼烧
  VoyageExploreLogBookNew          = 4501006;    // 海域探险 - 航海日志（新）
  VoyageExploreCruise              = 4501007;    // 海域探险 - 海域巡航
  VoyageExploreBuggyDiary          = 4501008;    // 海域探险 - 巴基日记
  VoyageExploreNewMap              = 4501009;    // 海域探险 - 新地图
  VoyageExploreShipwrightTalent    = 4501010;    // 海域探险 - 船匠天赋
  PvpTeaching                      = 4901;       // 竞技场教学
  PvpMechanicsTeaching             = 4911;       // 竞技场机制教学
  PvpMechanicsTeachingReward       = 4912;       // 竞技场机制教学奖励
  PvpBuddyTeaching                 = 4921;       // 竞技场伙伴教学
  Raid                             = 5001;       // 团本
  RaidExchange                     = 5001001;    // 团本兑换红点
  RaidEniesLobbyTalent             = 5001002;    // 团本司法岛天赋红点
  RaidNewUnlock                    = 5001003;    // 新解锁团本红点
  RaidDorikiTaskCanReward          = 5001004;    // 团本道力任务可领取红点
  WordStrip                        = 5101;       // 词条
  ShipRogue                        = 5201;       // 海战肉鸽
  SuperCaptain                     = 5501;       // 超级船长
}

message SystemOpenInfo {
  int32 id         = 1;  // 系统ID
  bool open        = 2;  // 系统是否解锁
  bool show        = 3;  // 是否要显示系统icon，不上架的系统不显示
  int64 start_time = 4;  // 开启时间(unix时间戳)
  int64 end_time   = 5;  // 结束时间(unix时间戳)
}

message OpenSystems {
  repeated SystemOpenInfo list            = 1;
  repeated int64 ban_platfriend_systemids = 2;  //屏蔽平台好友的系统列表
}

// 给 gate 的系统开放状态变更推送
message SystemOpenChangeNtf {
  string open_system_bits = 1;
}

// 给 gate 的authInfo变更推送
message SystemAuthInfoChangeNtf {
  string auth_info_bytes = 1;
}

message SystemSimpleInfo {
  int64 sys_id            = 1;  // 系统id
  string sys_name         = 2;  // 系统名字
  bool is_opened          = 3;  // true-已解锁 false-未解锁
  int64 min_level         = 4;  // 解锁要求的最低等级 当unlock_flag=false有效
  int64 past_adventure_id = 5;  // 解锁需要通关的关卡（为0时不需要该条件） 当unlock_flag=false有效
  int64 award_count       = 6;  // 还剩下的奖励次数 当unlock_flag=true有效 (awardcnt_item_id生效后作废)
  int64 max_award_count   = 7;  // 最大奖励次数 当unlock_flag=true有效   (awardcnt_item_id生效后作废)
  int64 awardcnt_item_id  = 8;  // 奖励次数道具id，客户端可以通过该id读配置获取相关信息
}

message QuerySubSystemsRequest {
  int64 sys_id = 1;
}

message QuerySubSystemsReply {
  repeated SystemSimpleInfo systems = 1;  // 系统列表，已排序
}

message IsSystemOpenRequest {
  int64 system_id = 1;  // 系统ID
}

message IsSystemOpenReply {}

message EnterSystemRequest {
  int64 system_id      = 1;  // 系统 ID
  int64 achieve_way_id = 2;  // 实现方式 ID
}

message EnterSystemReply {}
