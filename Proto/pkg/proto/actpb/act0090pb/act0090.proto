// cs protocol
syntax = "proto3";

package actpb.act0090pb;
option go_package = "git.woa.com/red/actsvr/pkg/proto/actpb/act0090pb";
import "corepb/common.proto";

service CSAct0090Service {
  rpc BuyFlipCount(BuyFlipCountRequest) returns (BuyFlipCountReply);                                   // 购买翻牌次数
  rpc ChangeCard(ChangeCardRequest) returns (ChangeCardReply);                                         // 换牌
  rpc GetCardReward(GetCardRewardRequest) returns (GetCardRewardReply);                                // 获取卡牌奖励
  rpc GetEnableBuyCount(GetEnableBuyCountRequest) returns (GetEnableBuyCountReply);                    // 可购买翻牌次数
  rpc FlipCards(FlipCardsRequest) returns (FlipCardsReply);                                            // 翻牌
  rpc GetAwardDetail(GetAwardDetailRequest) returns (GetAwardDetailReply);                             // 获取卡牌组合奖励说明
  rpc GetEnableBuyChangeCount(GetEnableBuyChangeCountRequest) returns (GetEnableBuyChangeCountReply);  // 可购买换牌次数
  rpc BuyChangeCount(BuyChangeCountRequest) returns (BuyChangeCountReply);                             // 购买换牌次数
}
message ActGetDetailRequest {}

message ActGetDetailReply {
  map<int64, Card> cards            = 1;  // 卡牌详情
  repeated corepb.Item change_props = 2;  // 换牌道具
  int64 flip_count                  = 3;  // 剩余翻牌次数
  int64 change_count                = 4;  // 换牌次数
  Award award                       = 5;  // 奖励
  int64 gold_id                     = 6;  // 金币ID
  int64 flip_ticket_id              = 7;  // 翻牌券ID
  int64 change_ticket_id            = 8;  // 换牌券ID
}

message Card {
  int64 card_number = 1;  // 卡牌数字
  int64 card_color  = 2;  // 卡牌颜色
}

message BuyFlipCountRequest {
  int64 count = 1;  // 购买次数
}

message BuyFlipCountReply {
  int64 flip_count = 1;  // 剩余翻牌次数
}

message ChangeCardRequest {
  int64 card_id = 1;  // 卡牌ID
}

message ChangeCardReply {
  map<int64, Card> cards = 1;  // 卡牌详情
  Award award            = 2;  // 奖励
  int64 change_count     = 3;  // 剩余换牌次数
}

message GetCardRewardRequest {
  int64 reward_id = 1;  // 奖励ID
}

message GetCardRewardReply {
  repeated corepb.Item awards = 1;  // 对应卡牌组合领取到的奖励
  int64 change_count          = 2;  // 剩余换牌次数
}

message GetEnableBuyCountRequest {}

message GetEnableBuyCountReply {
  int64 buy_count                = 1;  // 可购买次数
  int64 history_buy_count        = 2;  // 历史购买次数
  repeated corepb.Item buy_item  = 3;  // 购买所需的道具
  repeated corepb.Item flip_item = 4;  // 翻牌道具
  int64 gold_id                  = 5;  // 金币ID
  int64 flip_ticket_id           = 6;  // 翻牌券ID
  int64 change_ticket_id         = 7;  // 换牌券ID
}

message FlipCardsRequest {}

message FlipCardsReply {
  map<int64, Card> cards = 1;  // 卡牌详情
  Award award            = 2;  // 奖励
  int64 flip_count       = 3;  // 剩余翻牌次数
  int64 change_count     = 4;  // 剩余换牌次数
}

message GetAwardDetailRequest {}

message GetAwardDetailReply {
  repeated Award awards = 1;  //卡牌组合奖励说明
}

message Award {
  int64 id                    = 1;  // 奖励ID
  string name                 = 2;  // 奖励名称
  string desc                 = 3;  // 奖励描述
  repeated corepb.Item awards = 4;  // 奖励
}

message GetEnableBuyChangeCountRequest {}

message GetEnableBuyChangeCountReply {
  int64 buy_count               = 1;  // 可购买次数
  int64 history_buy_count       = 2;  // 历史购买次数
  repeated corepb.Item buy_item = 3;  // 购买所需的道具
  int64 change_ticket_id        = 7;  // 换牌券ID
}

message BuyChangeCountRequest {
  int64 count = 1;  // 购买换牌券个数
}

message BuyChangeCountReply {
  // int64 change_count = 1;  // 剩余换牌券个数
  // 后台这个字段的命名完全乱掉了 客户端不读这个数据了 默认是去道具model取数据的没有问题
  // 后台GitHub上的协议没有改 以后有更新的时候注意这个字段不要赋值 或者直接提醒后台修改
}