// cs protocol
syntax = "proto3";

package actpb.act0077pb;
option go_package = "git.woa.com/red/actsvr/pkg/proto/actpb/act0077pb";

import "corepb/common.proto";

service CSAct0077Service {
  // 获取奖励
  rpc GetTreasure(GetTreasureRequest) returns (GetTreasureReply);

  // 购买铲子
  rpc BuyShovel(BuyShovelRequest) returns (BuyShovelReply);
}

message ActGetDetailRequest {}

message SurpriseAwardsDetail {
  corepb.Item surprise_award = 1;  // 惊喜奖励列表
  bool finished              = 2;  // 是否完成
}

// 活动详情
message ActGetDetailReply {
  corepb.Item shovel                            = 1;  // 铲子道具
  repeated SurpriseAwardsDetail surprise_awards = 2;  // 惊喜奖励列表  状态
  int64 current_map_id                          = 3;  // 当前地图id
  map<int64, bool> detail                       = 4;  // field_id => 是否挖过
  corepb.Item cost                              = 5;  // 单个铲子的金币数量
  int64 already_buy_shovel_count                = 6;  // 已经购买铲子的数量
  int64 buy_shovel_max_count                    = 7;  // 最大购买铲子数量
}

message GetTreasureRequest {
  int64 map_id   = 1;  // 当前地图id
  int64 field_id = 2;  // 地块id
}

// 获得奖励
message GetTreasureReply {
  bool is_surprise            = 1;  // 是否是惊喜奖励
  repeated corepb.Item awards = 2;  // 奖励
}

message BuyShovelRequest {
  int32 count = 1;
}

message BuyShovelReply {
  corepb.Item shovel = 1;  // 获得铲子
}