
// cs protocol
syntax = "proto3";

package actpb.act0120pb;
option go_package = "git.woa.com/red/actsvr/pkg/proto/actpb/act0120pb";


import "corepb/common.proto";
import "pkg/proto/actpb/commonpb/common.proto";

service CSAct0120Service {
  rpc BuyProgress(BuyProgressRequest) returns (BuyProgressReply);
}

enum NodeStatus {
  STATUS_UNKNOWN = 0;  // 默认值 不使用
  STATUS_UNDONE  = 1;  // 未完成
  STATUS_REWARD  = 2;  // 完成可领奖
  STATUS_FINISH  = 3;  // 已领奖
}

enum RewardType {
  REWARD_TYPE_UNKNOWN  = 0;  // 默认值 不使用
  REWARD_TYPE_TASK     = 1;  // 任务领奖
  REWARD_TYPE_PROGRESS = 2;  // 节点进度领奖
}

message ActGetDetailRequest {}

message ActGetDetailReply {
  repeated actpb.commonpb.Task tasks = 1;  // 任务详情
  repeated NodeProgressInfo nodes    = 2;  // 进度信息详情
  int64 curr_total_progress          = 3;  // 当前进度值
}

message NodeProgressInfo {
  int64 node_id                = 1;  // 节点ID
  int64 target_progress        = 2;  // 节点对应的目标进度值
  repeated corepb.Item rewards = 3;  // 节点对应的奖励
  NodeStatus status            = 4;  // 节点状态
  bool special_reward          = 5;  // 是否为特殊奖励
}

message BuyProgressRequest {
  int64 buy_progress_count = 1;  // 购买的进度数
  corepb.Item cost         = 2;  // 购买花费的货币信息 id:count -> 10002:10
}

message BuyProgressReply {
  repeated NodeProgressInfo nodes = 1;  // 进度信息详情
}
