// cs protocol
syntax = "proto3";

package actpb.act0063pb;
option go_package = "git.woa.com/red/actsvr/pkg/proto/actpb/act0063pb";


import "corepb/common.proto";

service CSAct0063Service {
  rpc ProcessFarmlandIssue(ProcessFarmlandIssueRequest) returns (ProcessFarmlandIssueReply);  // 使用道具处理农田问题(缺水/缺肥/虫害)
}

// 农田问题
enum FarmlandIssue {
  ISSUE_UNKNOWN    = 0;  // 默认值
  ISSUE_WATER      = 1;  // 农田缺水
  ISSUE_PEST       = 2;  // 农田虫害
  ISSUE_FERTILIZER = 3;  // 农田缺肥
}

// 可使用的农田工具
enum FarmlandTool {
  TOOL_UNKNOWN      = 0;  // 默认值
  TOOL_WATERING_CAN = 1;  // 浇水的水壶
  TOOL_FERTILIZER   = 2;  // 肥料
  TOOL_PESTICIDE    = 3;  // 杀虫剂
}

enum FarmlandState {
  STATE_UNKNOWN   = 0;  // 默认值
  STATE_UNDONE    = 1;  // 没完成
  STATE_DONE_FULL = 2;  // 农田种植度已满 已完成
}

// 领奖类型
enum ClaimRewardType {
  TYPE_UNKNOWN  = 0;  // 默认值
  TYPE_FARMLAND = 1;  // 领取农田块奖励
  TYPE_SURPRISE = 2;  // 领取惊喜奖励
}

message FarmlandIssueInfo {
  FarmlandIssue issue   = 1;  // 问题类型
  int64 proc_progress   = 2;  // 当前处理进度
  int64 target_progress = 3;  // 当前问题目标进度
}

message ActGetDetailRequest {}

message ActGetDetailReply {
  repeated corepb.Item item_infos      = 1;  // 道具信息(肥料道具/杀虫剂道具/水壶道具)
  repeated FarmlandInfo farmland_infos = 2;  // 所有农田块的信息
  int64 cur_progress                   = 3;  // 当前的种植度
  int64 total_progress                 = 4;  // 总的种植度
}

message ProcessFarmlandIssueRequest {
  FarmlandTool use_tool = 1;  // 使用的工具
}

// 每块农田的信息
message FarmlandInfo {
  FarmlandState state          = 1;  // 农田状态
  FarmlandIssue issue          = 2;  // 农田问题
  int64 target_progress        = 3;  // 当前块 目标种植度
  int64 position               = 4;  // 农田块位置 从1开始
  FarmlandIssueInfo issue_info = 5;  // 当前块农田的问题信息
  int64 cur_progress           = 6;  // 当前农田块的种植度
}

message ProcessFarmlandIssueReply {
  repeated corepb.Item after_used_tool_info = 1;   // 使用之后对用道具的数量
  bool have_issue                           = 2;   // 当前农田是否有工具对应的问题
  int64 farmland_position                   = 3;   // 农田工具解决的位置 从1开始 从左到右 从上到下
  int64 tool_add_progress                   = 4;   // 使用工具增加的种植度
  int64 process_issue_add_progress          = 5;   // 解决农害问题增加的种植度
  int64 cur_progress                        = 6;   // 当前的种植度
  int64 total_progress                      = 7;   // 总的种植度
  FarmlandIssueInfo issue_info              = 8;   // 当前处理的农田问题信息
  repeated corepb.Item use_tool_rewards     = 9;   // 使用工具奖励的道具信息
  repeated FarmlandInfo farmland_infos      = 10;  // 所有农田块的信息
  repeated corepb.Item surprise_rewards     = 11;  // 惊喜奖励
  int64 new_issue_farmland_position         = 12;  // 新出现问题所在的农田块ID 没有则默认为0
}
