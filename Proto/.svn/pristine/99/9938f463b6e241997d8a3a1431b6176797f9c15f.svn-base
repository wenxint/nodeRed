// cs protocol
syntax = "proto3";

package actpb.act0158pb;
option go_package = "git.woa.com/red/actsvr/pkg/proto/actpb/act0158pb";


import "corepb/common.proto";

service CSAct0158Service {
  rpc FillAlbum(FillAlbumRequest) returns (FillAlbumReply);
}

enum QuestStatus {
  STATUS_UNKNOWN = 0;  // 默认值 不使用
  STATUS_LOCK    = 1;  // 未解锁
  STATUS_UNLOCK  = 2;  // 已解锁
  STATUS_PASS    = 3;  // 已通关
}

enum LockReason {
  REASON_UNKNOWN            = 0;  // 默认值 不使用
  REASON_PRE_QUEST_NOT_PASS = 1;  // 前置关卡未完成
}

message ActGetDetailRequest {}

message ActGetDetailReply {
  repeated QuestInfo quest_infos = 1;  // 所有关卡信息
  corepb.Item quest_item         = 2;  // 关卡填补需要的道具信息
  int64 season                   = 3;  // 表示第几期活动
}

message QuestInfo {
  int64 quest_id                = 1;  // 关卡ID
  QuestStatus quest_status      = 2;  // 关卡状态
  LockReason lock_reason        = 3;  // 锁定原因 只有quest_status=lock时
  repeated int64 quest_progress = 4;  // 关卡进度 记录的是已经填补的图 位置从1开始
  int64 album_id                = 5;  // 相册ID
  int64 background_img          = 6;  // 背景ID
}

message FillAlbumRequest {
  int64 quest_id = 1;  // 关卡ID
  int64 position = 2;  // 玩家填补的位置 从1开始
}

message FillAlbumReply {
  QuestInfo quest_info              = 1;  // 填补完之后当前关卡信息
  repeated corepb.Item fill_rewards = 2;  // 填补相册的奖励信息
  corepb.Item quest_item            = 3;  // 关卡填补需要的道具信息
}
