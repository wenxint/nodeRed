// cs protocol
syntax = "proto3";
package clientpb;
option go_package = "git.woa.com/red/game-proto/clientpb";

// http://tc-svn.tencent.com/KungfuTeam/Red_proj/trunk/RedApp/Content/Script/Red/Net/Proto/pkg/proto/clientpb/record.proto
// 这个文件来自客户端, 修改必须由客户端发起后同步给我们!!!

message ProcessPVPSyncCmd {
    int32 vkey = 1;  
    int32 player_id = 2;
    repeated int32 arg_list = 3;
    bytes pb_msg = 4;
}

message ProcessVector3 {
    int32 x = 1;
    int32 y = 2;
    int32 z = 3;
}

message Buff {
    int32 id = 1;
    int32 duraFrame = 2;
    int32 currentFrame = 3;
}

message Skill {
    int32 id = 1;
    int32 skillcd = 2;
}

message PlayerBox{
    ProcessVector3 center = 1;
    ProcessVector3 size = 2;
}

message Relation{
    int32 id = 1;
    repeated PlayerBox relationAtkBox = 2;
    repeated PlayerBox relationHitBox = 3;
    ProcessVector3 relationPos = 4;
    int32 relationStateid = 5;
    int32 relation_Current_frame_id = 6;
}

message PlayerLst {
    int32 id = 1;
    int32 sid = 2;
    int32 playerIndex = 3;

    int64 hp = 4;
    int32 mp = 5;
    int32 ep = 6;
    int32 pp = 7;
    int32 fp = 8;
    int32 anger = 9;
    int64 max_hp = 10;
    int32 p_attack = 11;
    int32 p_defend = 12;
    int32 fighting_spirit = 13;
    int32 ATTACK_CRITICAL_RATE =43;
    int32 ATTACK_CRITICAL_DAMAGE =44;
    int32 ATTACK_ADD_RATE =45;
    int32 AATT_ATTACK_ADD_VALUE =46;
    int32 AATT_ATTACK_DMG_SCALE =47;
    int32 AATT_DEFEND_ADD_RATE =48;
    int32 AATT_DEFEND_ADD_VALUE =49;
    int32 AATT_DEFEND_DMG_SCALE =50;
    int32 AATT_DMG_RANDOM_TYPE =51;

    ProcessVector3 speed = 14;
    ProcessVector3 pos = 15;
    bool isMirror = 16;

    int32 stateid = 17; //motiondid 
    string statename = 18;
    int32 prev_stateid = 19;
    string prev_state_name = 20;
    int32 actionid = 21;
    int32 prev_actionid = 22;
    int32 ai = 23;
    int32 current_frame_id = 25; //当前帧号
    int32 action_frames = 26; //当前motion的帧的长度
    int32 shared_frame_id = 27; //上一个执行的共享帧的帧号
    bool is_new_shared_frame = 28; //上一个执行的共享帧 是不是刚执行的
    ProcessVector3 globalVars = 29; //角色的全局共享变量
    ProcessVector3 Vars = 30; //角色的共享变量
    ProcessVector3 sstatusVars = 31; //角色的buff变量

    int32 rank = 32;
    repeated Buff buffList = 33;
    repeated Skill skillList = 34;
    
    int32 chunkid = 35;

    repeated PlayerBox atkBox = 36;
    repeated PlayerBox hitBox = 37;

    repeated Relation relationList = 38;

    int32 hurtSid = 39;
    int32 atkSid = 40;
    int32 dmgValue = 41;

    int32 cameraFollowId = 42;
}

message ProcessPVPSyncFrame {
    int32 frame_id = 1; //帧号
    repeated ProcessPVPSyncCmd cmd_list = 2; //帧数据
    repeated PlayerLst player_list = 3; //玩家数据
}

message ProcessPVPRecord {
    int32 totalFrameCount = 3;
    int64 randomSeed = 14;
    repeated ProcessPVPSyncFrame frame_list = 1;
    uint64 hash_code = 2; 

    int32 preAction = 4;
    int32 lstAction = 5;
    int32 wudiFrame = 6;
    int32 totalDmg = 7;
    int32 efficiency = 8;
    int32 xAxis = 9;
    int32 yAxis = 10;
    int32 yControll = 11;
    int32 zAxis = 12;
    int32 zFloor = 13;
}


