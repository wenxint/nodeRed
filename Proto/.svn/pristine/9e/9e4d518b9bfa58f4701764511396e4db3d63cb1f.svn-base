// cs protocol
syntax = "proto3";

package zonepb.avatarpb;
option go_package = "git.code.oa.com/red/zonesvr/pkg/proto/zonepb/avatarpb";

service CSService {
  // 请求所有头像信息
  rpc QueryAvatarInfo(QueryAvatarInfoRequest) returns (QueryAvatarInfoReply);
  // 操作头像
  rpc OperationAvatar(OperationAvatarRequest) returns (OperationAvatarReply);
}

message QueryAvatarInfoRequest {}

message QueryAvatarInfoReply {
  repeated Avatar avatars = 1;  // 头像列表
}

enum AvatarStatus {
  STATUS_UNKNOWN = 0;  // 未知状态
  LOCKED         = 1;  // 锁定中，未获得
  UNLOCKED       = 2;  // 已拥有，未使用
  NEW            = 3;  // 新获得
  USING          = 4;  // 使用中
}

enum AvatarType {
  TYPE_UNKNOWN = 0;  // 未知类型
  ETERNAL      = 1;  // 永久类型
  LIMITED      = 2;  // 限时类型
}

enum AvatarCategory {
  CATEGORY_UNKNOWN = 0;  // 无类别
  ACHIEVEMENT      = 1;  // 成就类型
  HONOR            = 2;  // 荣誉类型
  ACTIVITY         = 3;  // 活动类型
  SPECIAL          = 4;  // 特殊类型
}

message Avatar {
  int64 avatar_id         = 1;  // 头像 ID
  AvatarStatus status     = 2;  // 头像状态
  AvatarType type         = 3;  // 头像类型
  AvatarCategory category = 4;  // 头像类别
  int64 expire_at         = 5;  // 到期时间(Unix Second)，若为0则表示永久
  bool is_default         = 6;  // 是否默认头像
  bool is_plat            = 7;  // 是否平台头像
}

enum OperationType {
  OP_UNKNOWN = 0;  // 未知操作
  QUERY_NEW  = 1;  // 访问新头像
  USE_BOX    = 2;  // 使用头像，头像没有取消使用头像的说法，必须使用一个
}

message OperationAvatarRequest {
  int64 avatar_id       = 1;  // 头像 ID
  OperationType op_type = 2;  // 操作类型
}

message OperationAvatarReply {
  Avatar avatar = 1;  // 被操作的头像
}